// FullAddress jQuery Validator
function FullAddressValidator(e,t,n){var r=e;if(e.length==0)return!0;if($(t).data("LastAddressValidated")==r)return $(t).data("IsValid");$(t).data("IsChecking",!0),$(t).data("LastAddressValidated",r),r=r.replace(/\n/g,"");var i=new google.maps.Geocoder;return i.geocode({address:r},function(e,n){if(n==google.maps.GeocoderStatus.OK){var r=e[0].formatted_address;numCommas=r.match(/,/g).length,numCommas>=3?(r=r.replace(/, /," "),r=r.replace(/, USA$/,""),r=r.toUpperCase(),exists("#map_canvas")&&($("#map_canvas").show(),Map("map_canvas",e[0].geometry.location)),updateAddressFields(r),alert("Address will be set to: "+r),$(t).val(r),$(t).data("LastAddressValidated",r),$(t).data("IsValid",!0)):$(t).data("IsValid",!1)}else $(t).data("IsValid",!1);$(t).data("IsChecking",!1);var i=$(t).parents("form:first");$(t).data("SubmitForm")==1?i.submit():i.validate().element(t)}),!0}$.validator.addMethod("fulladdress",FullAddressValidator);
/*
 * jQuery pageSlide
 * Version 2.0
 * http://srobbin.com/jquery-pageslide/
 *
 * jQuery Javascript plugin which slides a webpage over to reveal an additional interaction pane.
 *
 * Copyright (c) 2011 Scott Robbin (srobbin.com)
 * Dual licensed under the MIT and GPL licenses.
*/
(function(e){function t(t,n){if(0===t.indexOf("#"))e(t).clone(!0).appendTo(i.empty()).show();else{if(n){var r=e("<iframe />").attr({src:t,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});i.html(r)}else i.load(t);i.data("localEl",!1)}}function n(e,t){var n=i.outerWidth(!0),o={},u={};if(!i.is(":visible")&&!s){s=!0;switch(e){case"left":i.css({left:"auto",right:"-"+n+"px"}),o["margin-left"]="-="+n,u.right="+="+n;break;default:i.css({left:"-"+n+"px",right:"auto"}),o["margin-left"]="+="+n,u.left="+="+n}r.animate(o,t),i.show().animate(u,t,function(){s=!1})}}var r=e("body"),i=e("#pageslide"),s=!1,o;0==i.length&&(i=e("<div />").attr("id","pageslide").css("display","none").appendTo(e("body"))),e.fn.pageslide=function(t){this.click(function(n){var r=e(this),s=e.extend({href:r.attr("href")},t);n.preventDefault(),n.stopPropagation(),i.is(":visible")&&r[0]==o?e.pageslide.close():(e.pageslide(s),o=r[0])})},e.fn.pageslide.defaults={speed:200,direction:"right",modal:!1,iframe:!0,href:null},e.pageslide=function(r){var s=e.extend({},e.fn.pageslide.defaults,r);i.is(":visible")&&i.data("direction")!=s.direction?e.pageslide.close(function(){t(s.href,s.iframe),n(s.direction,s.speed)}):(t(s.href,s.iframe),i.is(":hidden")&&n(s.direction,s.speed)),i.data(s)},e.pageslide.close=function(t){var n=e("#pageslide"),i=n.outerWidth(!0),o=n.data("speed"),u={},a={};if(!n.is(":hidden")&&!s){s=!0;switch(n.data("direction")){case"left":u["margin-left"]="+="+i,a.right="-="+i;break;default:u["margin-left"]="-="+i,a.left="-="+i}n.animate(a,o),r.animate(u,o,function(){n.hide(),s=!1,"undefined"!=typeof t&&t()})}},i.click(function(e){e.stopPropagation()}),e(document).bind("click keyup",function(t){"keyup"==t.type&&27!=t.keyCode||i.is(":visible")&&!i.data("modal")&&e.pageslide.close()})})(jQuery);